---
layout: post
title: Day15-req.body
tags: [Express,Node.js,javascript]
author: EmptyWu
date: 2022-05-07 02:02:20
category: Node.js
description: 若客戶端請求有 request body，可使用 req.body取得request body的 key:value 資料
---

## 前言

若客戶端請求有 request body，可使用 req.body 取得 request body 的 key: value 資料

<!--more-->

範例
```
POST 'http://localhost:3000/products' 

將資料帶入 request body
{
  "product": "hamburger",
  "quantity": 2,
  "price": 50
}
```

```javascript
app.post('/products', async function(req, res, next) {
  try {
    const data = req.body;
    if (data.product) {
      // 使用 mongoose 將 data 新增至資料庫 
      const newProduct = await Product.create(
        {
          product: data.product,
          quantity: data.quantity,
          price: data.price
        }
      );
      res.status(200).json({
        status: 'success',
        data,
      });
    } else {
      console.log("欄位填寫錯誤")
    }
  } catch (error) {
      console.log(error)
  }
});
```
## 參考資源

[Express - API](https://expressjs.com/zh-tw/api.html)

## 練習
POST API 的 req.body 新增一則貼文，並加上 Schema 欄位資料驗證，，可複製或下載此[程式碼](https://github.com/dogwantfly/express-add-post)練習

```javascript
const Post = require('../model/post');
const express = require('express');
const router = express.Router();
router.post('/user',async(req,res,next)=>{
  try{
    const data = req.body;
    if(data.content){
      const post = await Post.create({
        content:data.content,
        name:data.name,
        type:data.type
      })
      res.status(200).json(post);
    }else{
      res.status(400).send('給予格式錯誤')
    }
  }catch(err){
    res.status(400).send('給予格式錯誤')
  }
})
```

以上見解，如有錯誤地方還請留言告知，感謝。